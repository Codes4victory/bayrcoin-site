<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BayrCoin Wallet</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 40px;
        }
    </style>
</head>
<body>
    <h2>BayrCoin Wallet</h2>
    <p>Hier kannst du dein Guthaben einsehen und Coins senden:</p>

    <h3>Guthaben pr체fen</h3>
    <input type="email" id="email" placeholder="E-Mail eingeben">
    <button onclick="getBalance()">Guthaben pr체fen</button>
    <div id="guthaben">Warte auf Eingabe...</div>

    <h3>BayrCoin senden</h3>
    <input type="email" id="sender" placeholder="Deine E-Mail">
    <input type="email" id="receiver" placeholder="Empf채nger E-Mail">
    <input type="number" id="amount" placeholder="Menge">
    <button onclick="sendCoins()">Senden</button>
    <div id="transaktionsStatus"></div>

    <script>
        const API_URL = "https://script.google.com/macros/s/DEINE_DEPLOYMENT_URL/exec";

        function getBalance() {
            let email = document.getElementById("email").value;
            if (!email) {
                alert("Bitte E-Mail eingeben!");
                return;
            }

            fetch(`${API_URL}?action=getBalance&email=${encodeURIComponent(email)}`)
                .then(response => response.text())
                .then(data => {
                    document.getElementById("guthaben").innerText = "Dein Guthaben: " + data + " BayrCoin";
                })
                .catch(error => {
                    document.getElementById("guthaben").innerText = "Fehler beim Laden der Daten.";
                    console.error(error);
                });
        }

        function sendCoins() {
            let sender = document.getElementById("sender").value;
            let receiver = document.getElementById("receiver").value;
            let amount = document.getElementById("amount").value;

            if (!sender || !receiver || !amount) {
                alert("Bitte alle Felder ausf체llen!");
                return;
            }

            fetch(`${API_URL}?action=transfer&email=${encodeURIComponent(sender)}&receiver=${encodeURIComponent(receiver)}&amount=${encodeURIComponent(amount)}`)
                .then(response => response.text())
                .then(data => {
                    document.getElementById("transaktionsStatus").innerText = data;
                })
                .catch(error => {
                    document.getElementById("transaktionsStatus").innerText = "Fehler bei der Transaktion.";
                    console.error(error);
                });
        }
    </script>
</body>
</html>
